# MVC 模式

Django 是一个 MVC 框架，为了更好的了解 Django 框架，我们来了解下 MVC 设计模式。

MVC 是一种软件设计模式，全程是 Model View Controller，中文就是模型\(Model\) - 视图\(View\) - 控制器\(Controller\)。它的核心设计思想是：将数据层、界面显示和业务逻辑三部分分离，减少它们之间的耦合性，以达到在改进和个性化定制界面和用户交互的同时，不需要重新编写业务逻辑的效果。

目前很多 Web 框架采用了  
MVC 模式，但其实最早 MVC 是用于开发桌面程序中的，Model 是系统与数据库的交互接口层，View 是系统和用户的交互接口层，Control 是控制层，负责数据的中间处理部分。在 Web 应用中，三者的作用如下：

**Model（模型）：**表示应用程序核心（比如数据库记录列表），是应用程序中用于处理应用程序数据逻辑的部分，通常模型对象负责在数据库中存取数据。

**View（视图）：**显示数据（数据库记录），是应用程序中处理数据显示的部分，通常视图是依据模型数据创建的。

**Controller（控制器）：**处理输入（写入数据库记录），是应用程序中处理用户交互的部分，通常控制器负责从视图读取数据，控制用户输入，并向模型发送数据。

在网上找了一些 MVC 流程说明图，可以结合看下：

![](/assets/mvc-flow.jpg)

### MVC 优点

1. **降低系统耦合性**：视图层和业务层分离，更改视图层不会影响业务层逻辑
2. **可重用**：移动端和 PC 端不同的显示要求只需要修改视图层，而控制层和模型层无需调整
3. **易于维护**：分离视图层和业务逻辑层也使得WEB应用更易于维护和修改

### MVC 缺点

1. **增加系统复杂性**：强行将系统分成三个模块会增加系统的复杂性，并可能因此产生过多的更新操作，降低了系统运行效率
2. **视图层和控制层的连接过于紧密**：视图与控制器是相互分离，但却是联系紧密的部件，视图没有控制器的存在，其应用是很有限的，反之亦然，这样就妨碍了他们的独立重用
3. **视图层访问模型层效率低**：依据模型操作接口的不同，视图可能需要多次调用才能获得足够的显示数据。对未变化数据的不必要的频繁访问，也将损害操作性能

# Django 框架

Django 框架实现了 MVC 模式，但并不能以传统的 MVC 框架模式来理解 Django。在 Django 中，控制器接受用户输入的部分由框架自行处理，所以 Django 里更关注的是模型（Model）、模板（Template）和视图（Views），称为 MTV 模式。

Django 的 MTV 模式本质上和 MVC 是一样的，也是为了各组件间保持松耦合关系，只是定义上有些许不同，Django 的 MTV 分别是值：

**M 代表模型（Model）**：业务对象和数据库的关系映射\(ORM\)，对应 Django 中的模型层

**T 代表模板 \(Template\)**：页面显示内容\(HTML\)，对应 Django 中的模板层

**V 代表视图（Views）**：业务逻辑，并在适当时候调用Model和Template，对应 Django 中的视图层和 URLConf

其中，上述的 URLConf 即 Django 中所述的 URL 分发器，其机制是使用正则表达式匹配请求 URL，将不同的请求分发给不同的 View 处理。而在 View 中会再调用相应的 Model 和 Template 获取数据并展示给用户。

相关的流程图：

![](/assets/django-mtv.png)

